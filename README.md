# 解忧杂事掂 (Worry-Solving Weigher)

一款基于传统文化的生活解忧应用，通过数字起卦和八字命理为用户提供心理疏导与生活建议。

## 项目概述

解忧杂事掂是一款结合传统文化与现代心理疏导的应用，通过模拟传统数字起卦和八字命理方式，为用户提供心理支持和生活建议。用户可以针对生活中遇到的困惑与问题，通过应用获取针对性的建议与解答。

## 主要功能

- **主题选择**：用户可选择关注的主题，包括事业、子女、财富、父母、婚姻、健康等
- **多种解忧方案**：支持数字起卦和整体运势解忧两种方案
- **智能解读**：结合传统文化理论与现代心理学原理，针对用户问题给出解读
- **解忧小Tips**：提供具体可行的建议，包括幸运色、穿搭建议、书籍推荐等
- **交互式对话**：支持多轮追问，深入探讨用户关心的问题

## 项目结构

```
├── index.html         // 主页面
├── app.js            // 主应用逻辑
├── examples.js       // 示例问题配置
├── js/
│   ├── core.js            // 核心状态管理与应用初始化
│   ├── api-service.js     // API调用服务与对话历史管理
│   ├── steps.js           // 对话流程步骤管理
│   ├── numbers-project.js // 数字起卦项目功能实现
│   └── complete-project.js // 整体运势解忧方案实现
├── styles/
│   ├── main.css          // CSS入口文件
│   ├── base.css          // 基础样式
│   ├── homepage.css      // 首页样式
│   └── chatpage.css      // 聊天页样式
```

## 技术实现

项目采用模块化设计，主要组件包括：

- **core.js**：核心状态管理、UI元素引用和帮助函数，是项目的基础架构
- **api-service.js**：处理API调用与对话历史管理，负责与大语言模型的通信，包含两种解忧方案的历史记录管理
- **steps.js**：管理整个应用的对话流程，处理不同步骤的转换和业务逻辑
- **numbers-project.js**：实现数字起卦相关的核心功能，包括卦象生成和解读
- **complete-project.js**：实现整体运势解忧方案，基于用户的出生信息进行八字命理分析

## 解忧方案

应用目前提供两种解忧方案：

### 1. 数字起卦方案
通过用户选择的三个数字（1-9之间），生成对应的卦象，结合用户的问题提供传统文化视角的解读和建议。

### 2. 整体运势解忧方案
基于用户提供的出生信息（公历/农历+出生日期+出生时间+性别+年龄），运用八字命理相关理论，为用户分析命盘特点，并结合用户关心的问题给出分析和建议。

## 流程设计

应用设计了一个多步骤的用户交互流程：

### 公共流程 (Step 1-2)
1. **Step 1**：主题选择与问题输入
   - 用户选择关注主题（事业、子女等）
   - 用户输入具体困扰问题
   - 系统提供示例问法供参考

2. **Step 2**：解决方案选择
   - 用户选择解决方案类型（数字起卦或整体运势解忧）

### 数字起卦方案 (Step 3-5)
3. **Step 3**：数字选择
   - 用户选择三个数字（1-9之间）
   - 系统基于这些数字进行起卦分析

4. **Step 4**：卦象解读与交流
   - 系统给出初步卦象解读
   - 支持用户进行最多3次追问
   - 系统根据用户追问进行深入解读

5. **Step 5**：解忧小Tips
   - 系统为用户提供5条具体可行的建议
   - 支持用户进行最多2次追问
   - 系统针对追问提供更详细的指导

### 整体运势解忧方案 (Step 3-5)
3. **Step 3**：基本信息输入
   - 用户输入出生信息（公历/农历+出生日期+出生时间+性别+年龄）
   - 系统验证用户输入的格式

4. **Step 4**：八字命理解读与交流
   - 系统基于用户信息进行八字命理解读
   - 支持用户进行最多3次追问
   - 系统给出更深入的分析和建议

5. **Step 5**：解忧小Tips
   - 系统提供基于八字分析的具体建议
   - 包括幸运色、幸运数字、穿搭建议等
   - 支持用户进行最多2次追问

## 状态管理

- 应用内置对话历史管理机制，分别管理数字起卦和整体运势两种方案的对话历史
- 实现了回到首页时的完整状态重置，确保用户可以开启新的对话
- 通过模块化设计，实现不同步骤间的状态传递与管理

## 待完善事项

- **真实API集成**：目前使用模拟数据，需要接入实际的大语言模型API（如DeepSeek）
- **命理算法优化**：增强八字命理分析的准确性，加入更详细的命盘分析
- **方案选择界面**：完善Step 2中的解决方案选择界面，使其更直观易用
- **移动端适配优化**：优化不同屏幕尺寸的显示效果
- **用户数据存储**：实现用户历史对话的本地或云端存储
- **动画效果增强**：添加过渡动画，提升用户体验
- **多语言支持**：增加英文等其他语言界面
- **增加更多解决方案**：除现有方案外，可扩展塔罗牌、宫商角徵羽音乐疗愈等方式
- **性能优化**：优化资源加载和代码执行效率
- **用户个性化设置**：允许用户自定义主题、字体大小等

## 技术栈

- 前端：HTML5, CSS3, JavaScript (ES6+)
- 模块化：原生JS模块化设计
- 状态管理：自定义状态管理系统
- UI框架：自定义UI组件
- 图标：Font Awesome
- 字体：Inter (Google Fonts)

## 运行方式

本项目为纯前端应用，可通过以下方式运行：

1. 克隆项目仓库
2. 打开index.html文件即可在浏览器中运行
3. 也可部署到任何静态网站托管服务

---

愿这个小小的"解忧杂事掂"能为您带来一丝心灵的宁静和前行的力量。 